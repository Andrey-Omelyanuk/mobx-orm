version: '3.4'

services:
  front:
    build: 
      context: .
    volumes:
      - .:/app
    ports:
      - 9229:9229
    stdin_open: true # docker run -i
    tty: true        # docker run -t
    environment:
      - CHOKIDAR_USEPOLLING=true
    # entrypoint: ["sh", "-c", "yarn install && yarn test"]
    entrypoint: ["sh", "-c", "yarn install && yarn test --testMatch='**/src/**/model.spec.ts'"]
    # debug
    # chrome://inspect/#devices
    # entrypoint: ["sh", "-c", "yarn install && node --inspect-brk=0.0.0.0 node_modules/.bin/jest --runInBand --testMatch='**/src/**/model.spec.ts'"]
